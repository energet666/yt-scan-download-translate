# План улучшения проекта

Этот документ содержит список потенциальных улучшений для сервиса сканирования и загрузки видео с YouTube.

## 1. Архитектура и надежность
- [x] **Graceful Shutdown (Чистое завершение):** Реализовать обработку сигналов (`os/signal`), чтобы сервис корректно завершал текущие задачи (загрузки, обработку ffmpeg) перед выходом.
- [x] **Немедленное сохранение состояния:** Обновлять `downloaded.json` сразу после успешной обработки каждого видео, а не один раз в конце цикла. Это предотвратит повторные загрузки при сбоях.
- [x] **Очистка временных файлов:** Автоматически удалять промежуточные `.mp3` файлы и исходные видео (без перевода) после успешного создания финального файла.

## 2. Производительность
- [ ] **Параллелизм (Goroutines):** 
    - Параллельная проверка нескольких плейлистов.
    - Использование пула воркеров для загрузки и обработки видео (чтобы тяжелые видео не блокировали очередь).
- [ ] **Использование Context:** Внедрить `context.Context` для управления таймаутами и возможностью отмены длительных операций.

## 3. Логирование и конфигурация
- [x] **Структурированное логирование:** Перейти на `slog` (стандарт в Go 1.21+) для лучшей читаемости и возможности фильтрации логов.
- [ ] **Параметры запуска:** Добавить поддержку флагов командной строки (например, путь к рабочей директории, уровень логирования).

## 4. Качество кода (Рефакторинг)
- [x] **Уход от `panic`:** Заменить `panic()` в функциях инициализации на возврат ошибок и корректную их обработку в `main`.
- [x] **Декомпозиция `main.go`:** Вынести логику "загрузка + перевод + склейка" в отдельную функцию или метод структуры.
- [x] **Валидация конфигурации:** Добавить проверку наличия необходимых утилит (`yt-dlp`, `ffmpeg`, `vot-cli`) в системе при старте.
